@using Solemart.EntityLib
@using Solemart.BusinessLib;
@model List<Category>

@{
    ViewBag.Title = "Modify";
    Layout = "~/Areas/Manager/Views/Shared/_ManagerLayout.cshtml";
    List<Category> Categories = CategoryManager.Instance.Categories;
}

@section header_script_manager{
    <script type="text/javascript">
        function del_no_sub_cate() {

        }

        function move_cate() {
            $.post("/Manager/Category/ModifyCate",
                {
                    src_cate: $("#src_cate").val(),
                    desc_cate: $("#desc_cate").val()
                },
                function (result) {
                    if (result == 'ok')
                        window.location.reload();
                    else
                        alert(result);
                });
        }
    </script>
}

<h1>编辑类别（可以进行修改和删除):</h1>
<fieldset>
    <ol>
        <li>
            <label onclick="del_no_sub_cate();"><a class="comm_btn" href="javascript:void(0);">删除无子类的顶级类别</a></label>
            <p>&nbsp;</p>
        </li>
        <li>
            <label for="cate_name">选择类别:</label>
            <select name="src_cate" tabindex="4" id="src_cate">
                @foreach (Category cate in Model) {
                <option value="@cate.CateID">@cate.CateName</option>
                }
            </select>
            作为
            <select name="desc_cate" tabindex="4" id="desc_cate">
                @foreach (Category cate in Categories) {
                <option value="@cate.CateID">@cate.CateName</option>
                }
            </select>
            的子类
            <a class="comm_btn" href="javascript:void(0);" onclick="move_cate();">移动</a>
        </li>
    </ol>
</fieldset>