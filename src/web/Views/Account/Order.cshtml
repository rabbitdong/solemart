@using Solemart.EntityLib;

@model List<OrderItem>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";    
}

@section header_style{
    <link rel="stylesheet" href="/Content/cart.css" />
}

@section header_script{
    <script type="text/javascript" src="/Scripts/pages/um/myorders.js"></script>
}


<div id="orderlist">
    <div>
        @Html.Partial("_Pager")
    </div>
    <div>
        <ul>
            @foreach (OrderItem oi in Model) {
            <li class="@Solemart.WebUtil.Util.GetOrderShowStyle(oi.Status)" id="orderinfo_@oi.OrderID">
                <div class="orderinfo_head">
                    <span class="order_subhead">订单号:</span><span>@oi.OrderID.ToString("000000")</span>
                    <span class="order_subhead">下单时间:</span> <span>@oi.OrderTime.ToLongDateString()</span>
                    <p class="r">
                        <a href="javascript:;" class="comm_btn" onclick="javascript:expand_order(@oi.OrderID, this);">查看订单的产品列表</a>
                    </p>
                    @if(oi.Status == OrderStatus.Ordered){
                    <p class="r">
                        <a href="javascript:;" class="comm_btn" onclick="javascript:cancel_order(@oi.OrderID, this);">取消</a>
                    </p>
                    }
                    @if(oi.Status == OrderStatus.Sending){
                    <p class="r">
                        <a href="javascript:;" class="comm_btn" onclick="javascript:confirm_order(@oi.OrderID, this);">确认收货</a>
                    </p>
                    }
                </div>
                <div class="orderinfo_conent">
                    <p>
                        <span class="order_subhead">总价:</span>
                        <span>@oi.TotalPrice.ToString("C2")</span>
                    </p>
                    <p>
                        <span class="order_subhead">订单状态:</span>
                        <span id="order_state_@oi.OrderID">@oi.Status.GetEnumDisplay()</span>
                    </p>
                    <p class="block">
                        <span class="order_subhead">付款方式:</span>
                        <span>@oi.AddressInfo.Pay.GetEnumDisplay()</span>
                    </p>
                    <p class="block">
                        <span class="order_subhead">付款状态:</span>
                        <span id="pay_status_@oi.OrderID">@(oi.IsPay?"已付款":"未付款")</span>
                    </p>
                </div>
            </li>
            }
        </ul>
    </div>
    <div>
        @Html.Partial("_Pager")
    </div>
</div>